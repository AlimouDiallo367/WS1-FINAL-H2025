<?php require_once 'session.php'; ?>
<?php $utilisateurConnecte = getUtilisateurConnecte(); ?>

<header class="navbar navbar-expand-lg bg-gradient-dark shadow-sm rounded-3 mt-3 mx-4 px-4 py-2">
  <div class="container-fluid">

    <!-- Logo + Nom -->
    <a class="navbar-brand d-flex align-items-center" href="index.phtml">
      <img src="assets/img/logo.webp" alt="Logo" width="60" height="60" class="me-2">
      <span class="fw-semibold fs-5 text-white">Point Final</span>
    </a>

    <!-- Hamburger mobile -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#main-navbar" aria-label="Toggle navigation">
      <span class="material-icons-round fs-3">menu</span>
    </button>

    <!-- Navigation -->
    <div class="collapse navbar-collapse justify-content-end" id="main-navbar">
      <ul class="navbar-nav gap-2 align-items-center">

        <li class="nav-item">
          <a class="nav-link d-flex align-items-center" href="accueil.phtml">
            <span class="material-icons-round me-1">home</span> Accueil
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link d-flex align-items-center" href="classement.phtml">
            <span class="material-icons-round me-1">leaderboard</span> Classement
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link d-flex align-items-center" href="liste-parties.phtml">
            <span class="material-icons-round me-1">list_alt</span> Parties
          </a>
        </li>

        <?php if ($utilisateurConnecte): ?>
          <!-- Utilisateur connecté -->
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="profil.phtml?id=<?= $utilisateurConnecte->getId() ?>">
              <span class="material-icons-round me-1">account_circle</span> <?= htmlspecialchars($utilisateurConnecte->getNomComplet()) ?>
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="gerer-compte.phtml">
              <span class="material-icons-round me-1">settings</span> Gérer le compte
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link d-flex align-items-center text-danger" href="connexion.phtml?bouton-deconnexion=1">
              <span class="material-icons-round me-1">logout</span> Déconnexion
            </a>
          </li>
        <?php else: ?>
          <!-- Invité -->
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="connexion.phtml">
              <span class="material-icons-round me-1">login</span> Connexion
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="inscription.phtml">
              <span class="material-icons-round me-1">person_add</span> Inscription
            </a>
          </li>
        <?php endif; ?>

        <!-- Ajouter partie si admin -->
        <?php if ($utilisateurConnecte && $utilisateurConnecte->getRole()->getNom() === 'Administrateur'): ?>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center text-warning" href="ajout-partie.phtml">
              <span class="material-icons-round me-1">add_circle</span> Ajout Partie
            </a>
          </li>
        <?php endif; ?>

      </ul>
    </div>
  </div>
</header>
